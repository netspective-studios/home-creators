[user]
	name = {{ .git.user.name | quote }}
	email = {{ .git.user.email | quote }}

[credential]
    helper = cache --timeout={{ .git.credential.helper.cache.timeout }}

{{- if (index . "git") }}
{{- if (index . "git" "credential") }}
{{- if (index . "git" "credential" "helpers") }}
{{- if (index . "git" "credential" "helpers" "env") }}
{{- range .git.credential.helpers.env }}
[credential "{{.site}}"]
	helper = "!f() { echo \"username=${{{.envVarNamePrefix}}_USERNAME}\\npassword=${{{.envVarNamePrefix}}_PASSWORD\"; }; f"
{{- end }}
{{- end }}
{{- end}}
{{- end}}
{{- end}}

{{- if (index . "github") }}
{{- if (index . "github" "user") }}
{{- if (index . "github" "user" "prime") }}
{{- with .github.user.prime }}
{{- if and (index . "id") (index . "pat") (index . "insteadof_in_gitconfig") }}

[url "https://{{ .id }}:{{ .pat }}@github.com"]
	insteadOf = https://github.com
{{- else}}	
# 'id' 'pat' and 'insteadof_in_gitconfig' required in '.github.user.prime' if this is desired:
# [url "https://id:pat@github.com"]
#     insteadOf = https://github.com
{{- end}}
{{- end}}
{{- end}}
{{- end}}
{{- end}}
